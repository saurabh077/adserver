BIN=bin
OBJ=obj
INC=include
DB=db
SRC=src
UTIL=util
CFLAGS= -lodbc

OBJS = \
	$(OBJ)/db_connection.o \
	$(OBJ)/fetch_url.o \
	$(OBJ)/code.o 

BINS = \
	$(BIN)/code

all: make_dirs $(OBJS) $(BINS)


make_dirs: 
	@echo "----------------------------"
	@echo "CREATING REQUIRED DIRECTORIES"
	@echo "----------------------------"
	mkdir -p $(OBJ) $(BIN)

$(BIN)/code: $(SRC)/code.c $(OBJ)/db_connection.o $(OBJ)/fetch_url.o
	gcc $^ $(CFLAGS) -o $@

$(OBJ)/db_connection.o: $(DB)/db_connection.c
	gcc -c $(CFLAGS) $^ -o $@ 

$(OBJ)/fetch_url.o: $(UTIL)/fetch_url.c
	gcc -c $(CFLAGS) $^ -o $@

$(OBJ)/code.o: $(SRC)/code.c
	gcc -c $(CFLAGS) $^ -o $@

clean:
	@echo "----------------------------------------------------------------------------------"
	@echo "===============================CLEANING $(BIN)===================================="
	@echo "----------------------------------------------------------------------------------"
	rm -f $(BINS)
	@echo "----------------------------------------------------------------------------------"
	@echo "================================CLEAN $(BIN) COMPLETE============================="
	@echo "----------------------------------------------------------------------------------"
	@echo "----------------------------------------------------------------------------------"
	@echo "==============================CLEANING $(OBJ)====================================="
	@echo "----------------------------------------------------------------------------------"
	rm -f $(OBJS)
	@echo "----------------------------------------------------------------------------------"
	@echo "=============================CLEAN $(OBJ) COMPLETE================================"
	@echo "----------------------------------------------------------------------------------"

clobber:
	@echo "---------------------------------------------------------------------------------"
	@echo "================================REMOVING $(BIN)=================================="
	@echo "---------------------------------------------------------------------------------"
	rm -rf $(BIN)
	@echo "---------------------------------------------------------------------------------"
	@echo "==============================REMOVE $(BIN) COMPLETE============================="
	@echo "---------------------------------------------------------------------------------"
	@echo "---------------------------------------------------------------------------------"
	@echo "==============================REMOVING $(OBJ)===================================="
	@echo "---------------------------------------------------------------------------------"
	rm -rf $(OBJ)
	@echo "---------------------------------------------------------------------------------"
	@echo "==============================REMOVE $(OBJ) COMPLETE============================="
	@echo "---------------------------------------------------------------------------------"

